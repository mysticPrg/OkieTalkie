/*
  * Copyright (c) 2013 Samsung Electronics Co., Ltd
  *
  * Licensed under the Flora License, Version 1.1 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *     http://floralicense.org/license/
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */

!function(a){var b=tau;!function(a,b){if(!a.Scroller){var c={START:"scrollstart",END:"scrollend",CANCEL:"scrollcancel"},d=function(a,b){return arguments.length&&this._create(a,b),this};d.Orientation={VERTICAL:1,HORIZONTAL:2},d.prototype={_create:function(a,b){if(this.element=a,this.options={},1!==this.element.children.length)throw"scroller has only one child.";this.scroller=this.element.children[0],this.scrollerStyle=this.scroller.style,this.bouncingEffect=null,this.scrollbar=null,this.width=0,this.height=0,this.scrollerWidth=0,this.scrollerHeight=0,this.scrollerOffsetX=0,this.scrollerOffsetY=0,this.maxScrollX=0,this.maxScrollY=0,this.startTouchPointX=0,this.startTouchPointY=0,this.startScrollerOffsetX=0,this.startScrollerOffsetY=0,this.lastVelocity=0,this.lastEstimatedPoint=0,this.lastTouchPointX=-1,this.lastTouchPointY=-1,this.orientation,this.initiated=!1,this.enabled=!0,this.scrolled=!1,this.moved=!1,this.scrollCanceled=!1,this.startTime,this._initOptions(b),this._bindEvents(),this._init()},_initOptions:function(a){this.options={scrollDelay:300,threshold:10,minThreshold:5,flickThreshold:30,scrollbar:!1,useBouncingEffect:!1,orientation:"vertical",momentum:!0},this.setOptions(a)},_init:function(){this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.width-this.scrollerWidth,this.maxScrollY=this.height-this.scrollerHeight,this.orientation="horizontal"===this.options.orientation?d.Orientation.HORIZONTAL:d.Orientation.VERTICAL,this.initiated=!1,this.scrolled=!1,this.moved=!1,this.touching=!0,this.scrollCanceled=!1,this.orientation===d.Orientation.HORIZONTAL?(this.maxScrollY=0,this.scrollerHeight=this.height):(this.maxScrollX=0,this.scrollerWidth=this.width),this._initLayout(),this._initScrollbar(),this._initBouncingEffect()},_initLayout:function(){var a=this.element.style,b=this.scroller.style;a.overflow="hidden",a.position="relative",b.position="absolute",b.top="0px",b.left="0px",b.width=this.scrollerWidth+"px",b.height=this.scrollerHeight+"px"},_initScrollbar:function(){var a=this.options.scrollbar;a&&(this.scrollbar=new d.Scrollbar(this.element,{type:a,orientation:this.orientation}))},_initBouncingEffect:function(){var a=this.options;a.useBouncingEffect&&(this.bouncingEffect=new d.Effect.Bouncing(this.element,{maxScrollX:this.maxScrollX,maxScrollY:this.maxScrollY,orientation:this.orientation}))},_resetLayout:function(){var a=this.element.style;a.overflow="",a.position=""},_bindEvents:function(){"ontouchstart"in b?(this.scroller.addEventListener("touchstart",this),this.scroller.addEventListener("touchmove",this),this.scroller.addEventListener("touchend",this),this.scroller.addEventListener("touchcancel",this)):(this.scroller.addEventListener("mousedown",this),document.addEventListener("mousemove",this),document.addEventListener("mouseup",this),document.addEventListener("mousecancel",this)),b.addEventListener("resize",this)},_unbindEvents:function(){"ontouchstart"in b?(this.scroller.removeEventListener("touchstart",this),this.scroller.removeEventListener("touchmove",this),this.scroller.removeEventListener("touchend",this),this.scroller.removeEventListener("touchcancel",this)):(this.scroller.removeEventListener("mousedown",this),document.removeEventListener("mousemove",this),document.removeEventListener("mouseup",this),document.removeEventListener("mousecancel",this)),b.removeEventListener("resize",this)},handleEvent:function(a){var b=this._getPointPositionFromEvent(a);switch(a.type){case"mousedown":a.preventDefault();case"touchstart":this._start(a,b);break;case"mousemove":a.preventDefault();case"touchmove":this._move(a,b);break;case"mouseup":case"touchend":this._end(a,b);break;case"mousecancel":case"touchcancel":this.cancel(a);break;case"resize":this.refresh()}},setOptions:function(a){var b;for(b in a)a.hasOwnProperty(b)&&a[b]&&(this.options[b]=a[b])},refresh:function(){this._clear(),this._init()},scrollTo:function(a,b,c){this._translate(a,b,c),this._translateScrollbar(a,b,c)},_translate:function(a,c,d){var e,f,g=this.scrollerStyle;f=d?"-webkit-transform "+d/1e3+"s ease-out":"none",e="translate3d("+a+"px,"+c+"px, 0)",this.scrollerOffsetX=b.parseInt(a,10),this.scrollerOffsetY=b.parseInt(c,10),g["-webkit-transform"]=e,g["-webkit-transition"]=f},_translateScrollbar:function(a,b,c){this.scrollbar&&this.scrollbar.translate(this.orientation===d.Orientation.HORIZONTAL?-a:-b,c)},_getEstimatedCurrentPoint:function(a,b){var c,d,e=15;return b===a?(this.lastVelocity=0,this.lastEstimatedPoint=a,a):(c=(a-b)/22,d=a+e*c,this.lastVelocity*c>=0&&(!c||0>c&&d>this.lastEstimatedPoint||c>0&&d<this.lastEstimatedPoint)&&(d=this.lastEstimatedPoint),this.lastVelocity=c,this.lastEstimatedPoint=d,d)},_getPointPositionFromEvent:function(a){return-1!==a.type.search(/^touch/)&&a.touches&&a.touches.length?{x:a.touches[0].clientX,y:a.touches[0].clientY}:{x:a.clientX,y:a.clientY}},_start:function(a,b){!this.initiated&&this.enabled&&(this.startTime=(new Date).getTime(),this.startTouchPointX=b.x,this.startTouchPointY=b.y,this.startScrollerOffsetX=this.scrollerOffsetX,this.startScrollerOffsetY=this.scrollerOffsetY,this.lastTouchPointX=b.x,this.lastTouchPointY=b.y,this.initiated=!0,this.scrollCanceled=!1,this.scrolled=!1,this.moved=!1,this.touching=!0)},_move:function(a,b){var e,f,g=(new Date).getTime(),h=this.options.scrollDelay||0,i=this.options.threshold||0,j=this.options.minThreshold||0,k=this.startTouchPointX-b.x,l=this.startTouchPointY-b.y,m=Math.abs(k),n=Math.abs(l),o=Math.max(m,n);if(this.initiated&&this.touching&&!this.scrollCanceled&&(this.lastTouchPointX=b.x,this.lastTouchPointY=b.y,this.scrolled||!(j>o||i>o&&(!h||g-this.startTime<h)))){if(!this.scrolled){switch(this.orientation){case d.Orientation.HORIZONTAL:if(n>m)return this.cancel(),void 0;break;case d.Orientation.VERTICAL:if(m>n)return this.cancel(),void 0}this._fireEvent(c.START),this.startTouchPointX=b.x,this.startTouchPointY=b.y}this.scrolled=!0,this.orientation===d.Orientation.HORIZONTAL?(e=this.startScrollerOffsetX+this._getEstimatedCurrentPoint(b.x,this.lastTouchPointX)-this.startTouchPointX,f=this.startScrollerOffsetY):(e=this.startScrollerOffsetX,f=this.startScrollerOffsetY+this._getEstimatedCurrentPoint(b.y,this.lastTouchPointY)-this.startTouchPointY),(e>0||e<this.maxScrollX)&&(e=e>0?0:this.maxScrollX),(f>0||f<this.maxScrollY)&&(f=f>0?0:this.maxScrollY),e!==this.scrollerOffsetX||f!==this.scrollerOffsetY?(this.moved=!0,this._translate(e,f),this._translateScrollbar(e,f),this.bouncingEffect&&this.bouncingEffect.hide()):this.bouncingEffect&&this.bouncingEffect.drag(e,f),a.preventDefault()}},_end:function(a){var b,c,e=Math.round(this.lastTouchPointX),f=Math.round(this.lastTouchPointY),g=Math.abs(e-this.startTouchPointX),h=Math.abs(f-this.startTouchPointY),i=this.orientation===d.Orientation.HORIZONTAL?g:h,j=this.orientation===d.Orientation.HORIZONTAL?this.maxScrollX:this.maxScrollY,k=this.orientation===d.Orientation.HORIZONTAL?this.scrollerOffsetX:this.scrollerOffsetY,l=this.initiated&&this.scrolled;return this.touching=!1,!l||this.scrollCanceled?(this.initiated=!1,void 0):(this.bouncingEffect&&this.bouncingEffect.dragEnd(),this.moved?(b=(new Date).getTime(),c=b-this.startTime,this.options.momentum&&300>c&&0>k&&k>j&&i>this.options.flickThreshold?this._startMomentumScroll():this._endScroll(),a.preventDefault(),void 0):(this._endScroll(),void 0))},_endScroll:function(){this.scrolled&&this._fireEvent(c.END),this.moved=!1,this.scrolled=!1,this.scrollCanceled=!1,this.initiated=!1},cancel:function(){this.scrollCanceled=!0,this.initiated&&(this._translate(this.startScrollerOffsetX,this.startScrollerOffsetY),this._translateScrollbar(this.startScrollerOffsetX,this.startScrollerOffsetY),this._fireEvent(c.CANCEL)),this.initiated=!1,this.scrolled=!1,this.moved=!1,this.touching=!1},_startMomentumScroll:function(){this._endMomentumScroll()},_endMomentumScroll:function(){this._endScroll()},_fireEvent:function(a,b){var c=new CustomEvent(a,{bubbles:!0,cancelable:!0,detail:b});this.element.dispatchEvent(c)},_clear:function(){this.initiated=!1,this.scrolled=!1,this.moved=!1,this.scrollCanceled=!1,this.touching=!1,this._resetLayout(),this._clearScrollbar(),this._clearBouncingEffect()},_clearScrollbar:function(){this.scrollbar&&this.scrollbar.destroy(),this.scrollbar=null},_clearBouncingEffect:function(){this.bouncingEffect&&this.bouncingEffect.destroy(),this.bouncingEffect=null},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},destroy:function(){this._clear(),this._unbindEvents(),this.scrollerStyle=null,this.scroller=null}},a.Scroller=d}}(b,a),function(a,b){var c=a.Scroller;c.Scrollbar||(c.Scrollbar=function(a,b){this.element=null,this.barElement=null,this.container=null,this.clip=null,this.options={},this.type=null,this.maxScroll,this.started=!1,this.displayDelayTimeoutId=null,this._create(a,b)},c.Scrollbar.prototype={_create:function(a,b){this.container=a,this.clip=a.children[0],this._initOptions(b),this._init()},_initOptions:function(b){b=a.extendObject({type:!1,displayDelay:700,sections:null,orientation:c.Orientation.VERTICAL},b),this.setOptions(b)},_init:function(){var a=this.options.type;if(a){if(this.type=c.Scrollbar.Type[a],!this.type)throw"Bad options. [type : "+this.options.type+"]";this._createScrollbar()}},_createScrollbar:function(){var a=this.options.sections,b=this.options.orientation,c=document.createElement("DIV"),d=document.createElement("span");c.appendChild(d),this.type.insertAndDecorate({orientation:b,wrapper:c,bar:d,container:this.container,clip:this.clip,sections:a}),this.element=c,this.barElement=d},_removeScrollbar:function(){this.element&&this.element.parentNode.removeChild(this.element),this.element=null,this.barElement=null},setOptions:function(b){a.extendObject(this.options,b)},refresh:function(){this.clear(),this.init()},translate:function(a,c){var d,e,f,g,h=this.options.orientation;this.element&&this.type&&(a=this.type.offset(h,a),f=this.barElement.style,e=c?"-webkit-transform "+c/1e3+"s ease-out":"none",d="translate3d("+a.x+"px,"+a.y+"px, 0)",f["-webkit-transform"]=d,f["-webkit-transition"]=e,this.started||this._start(),g=(c||0)+this.options.displayDelay,null!==this.displayDelayTimeoutId&&b.clearTimeout(this.displayDelayTimeoutId),this.displayDelayTimeoutId=b.setTimeout(this._end.bind(this),g))},_start:function(){this.type.start(this.element,this.barElement),this.started=!0},_end:function(){this.started=!1,this.displayDelayTimeoutId=null,this.type&&this.type.end(this.element,this.barElement)},_clear:function(){this._removeScrollbar(),this.started=!1,this.type=null,this.element=null,this.barElement=null,this.displayDelayTimeoutId=null},destroy:function(){this._clear(),this.options=null,this.container=null,this.clip=null}},c.Scrollbar.Type={},c.Scrollbar.Type.Interface={insertAndDecorate:function(){},start:function(){},end:function(){},offset:function(){}},c.Scrollbar.Type.bar=a.extendObject({},c.Scrollbar.Type.Interface,{options:{wrapperClass:"ui-scrollbar-bar-type",barClass:"ui-scrollbar-indicator",orientationClass:"ui-scrollbar-",margin:2,animationDuration:500},insertAndDecorate:function(a){var d=a.wrapper,e=a.bar,f=a.container,g=a.clip,h=a.orientation,i=this.options.margin,j=h===c.Orientation.VERTICAL?g.offsetHeight:g.offsetWidth,k=h===c.Orientation.VERTICAL?f.offsetHeight:f.offsetWidth,l=this.options.orientationClass+(h===c.Orientation.VERTICAL?"vertical":"horizontal"),m=e.style;this.containerSize=k,this.maxScrollOffset=j-k,this.scrollZoomRate=k/j,this.barSize=b.parseInt(k/(j/k))-2*i,d.className=this.options.wrapperClass+" "+l,e.className=this.options.barClass,h===c.Orientation.VERTICAL?(m.height=this.barSize+"px",m.top="0px"):(m.width=this.barSize+"px",m.left="0px"),f.appendChild(d)},offset:function(a,b){var d,e,b;return b=b!==this.maxScrollOffset?b*this.scrollZoomRate:this.containerSize-this.barSize-2*this.options.margin,a===c.Orientation.VERTICAL?(d=0,e=b):(d=b,e=0),{x:d,y:e}},start:function(a){var b=a.style,c=this.options.animationDuration;b["-webkit-transition"]="opacity "+c/1e3+"s ease",b.opacity=1},end:function(a){var b=a.style,c=this.options.animationDuration;b["-webkit-transition"]="opacity "+c/1e3+"s ease",b.opacity=0}}),c.Scrollbar.Type.tab=a.extendObject({},c.Scrollbar.Type.Interface,{options:{wrapperClass:"ui-scrollbar-tab-type",barClass:"ui-scrollbar-indicator",margin:1},insertAndDecorate:function(a){var d,e,f,g,h=a.wrapper,i=a.bar,j=a.container,k=a.clip,l=a.sections,m=a.orientation,n=this.options.margin,o=k.offsetWidth,p=k.offsetHeight,q=j.offsetWidth,r=j.offsetHeight,s=m===c.Orientation.VERTICAL?p:o,t=m===c.Orientation.VERTICAL?r:q,u=s/t;if(this.containerSize=q,this.maxScrollOffset=s-t,this.scrollZoomRate=q/s,this.barSize=b.parseInt((q-2*n*(u-1))/u),h.className=this.options.wrapperClass,i.className=this.options.barClass,i.style.width=this.barSize+"px",i.style.left="0px",j.insertBefore(h,k),e=i.offsetHeight,d=p-e,k.style.height=d+"px",l&&l.length)for(f=0,g=l.length;g>f;f++)l[f].style.height=d+"px"},offset:function(a,b){return{x:0===b?-1:b!==this.maxScrollOffset?b*this.scrollZoomRate:this.containerSize-this.barSize-this.options.margin,y:0}}}))}(b,a),function(a){var b=a.Scroller;b.Effect||(b.Effect={},b.Effect.Bouncing=function(a,b){this.orientation,this.maxValue,this.container,this.minEffectElement,this.maxEffectElement,this.targetElement,this.isShow=!1,this.isDrag=!1,this.isShowAnimating=!1,this.isHideAnimating=!1,this._create(a,b)},b.Effect.Bouncing.prototype={options:{className:"ui-scrollbar-bouncing-effect",duration:500},_create:function(a,b){this.container=a,this.orientation=b.orientation,this.maxValue=this._getValue(b.maxScrollX,b.maxScrollY),this._initLayout()},_initLayout:function(){var a=this.minEffectElement=document.createElement("DIV"),c=this.maxEffectElement=document.createElement("DIV"),d=this.options.className;this.orientation===b.Orientation.HORIZONTAL?(a.className=d+" ui-left",c.className=d+" ui-right"):(a.className=d+" ui-top",c.className=d+" ui-bottom"),this.container.appendChild(a),this.container.appendChild(c),a.addEventListener("webkitAnimationEnd",this),c.addEventListener("webkitAnimationEnd",this)},drag:function(a,b){this.isDrag=!0,this._checkAndShow(a,b)},dragEnd:function(){!this.isShow||this.isShowAnimating||this.isHideAnimating||this._beginHide(),this.isDrag=!1},end:function(a,b){this._checkAndShow(a,b)},show:function(){this.targetElement&&(this.isShow=!0,this._beginShow())},hide:function(){this.isShow&&(this.minEffectElement.style.display="none",this.maxEffectElement.style.display="none",this.targetElement.classList.remove("ui-hide"),this.targetElement.classList.remove("ui-show")),this.isShow=!1,this.isShowAnimating=!1,this.isHideAnimating=!1,this.targetElement=null},_checkAndShow:function(a,b){var c=this._getValue(a,b);this.isShow?!this.isShow||this.isDrag||this.isShowAnimating||this.isHideAnimating||this._beginHide():c>=0?(this.targetElement=this.minEffectElement,this._beginShow()):c<=this.maxValue&&(this.targetElement=this.maxEffectElement,this._beginShow())},_getValue:function(a,c){return this.orientation===b.Orientation.HORIZONTAL?a:c},_beginShow:function(){this.targetElement&&!this.isShowAnimating&&(this.targetElement.style.display="block",this.targetElement.classList.remove("ui-hide"),this.targetElement.classList.add("ui-show"),this.isShow=!0,this.isShowAnimating=!0,this.isHideAnimating=!1)},_finishShow:function(){this.isShowAnimating=!1,this.isDrag||(this.targetElement.classList.remove("ui-show"),this._beginHide())},_beginHide:function(){this.isHideAnimating||(this.targetElement.classList.remove("ui-show"),this.targetElement.classList.add("ui-hide"),this.isHideAnimating=!0,this.isShowAnimating=!1)},_finishHide:function(){this.isHideAnimating=!1,this.targetElement.classList.remove("ui-hide"),this.hide(),this._checkAndShow()},handleEvent:function(a){switch(a.type){case"webkitAnimationEnd":this.isShowAnimating?this._finishShow():this.isHideAnimating&&this._finishHide()}},destroy:function(){this.minEffectElement.removeEventListener("webkitAnimationEnd",this),this.maxEffectElement.removeEventListener("webkitAnimationEnd",this),this.container.removeChild(this.minEffectElement),this.container.removeChild(this.maxEffectElement),this.container=null,this.minEffectElement=null,this.maxEffectElement=null,this.targetElement=null,this.isShow=null,this.orientation=null,this.maxValue=null}})}(b,a),function(a,b){function c(a,b){return this._create(a,b),this}if(!a.SectionChanger){var d=a.Scroller,e={CHANGE:"sectionchange"};a.inherit(c,d,{_create:function(a,b){this.sections=null,this.sectionPositions=[],this.activeIndex=0,this._super(a,b)},_initOptions:function(a){a=a||{},a.items=a.items||"section",a.activeClass=a.activeClass||"section-active",a.circular=a.circular||!1,a.animate=a.animate||!0,a.animateDuration=a.animateDuration||100,a.orientation=a.orientation||"horizontal",a.changeThreshold=a.changeThreshold||-1,this._super(a)},_init:function(){var a,b,c;if(this.sections="string"==typeof this.options.items?this.scroller.querySelectorAll(this.options.items):this.options.items,a=this.sections.length,this.options.circular&&3>a)throw"if you use circular option, you must have at least three sections.";for(this.activeIndex>=a&&(this.activeIndex=a-1),b=0;a>b;b++)c=this.sections[b].className,c&&c.indexOf(this.options.activeClass)>-1&&(this.activeIndex=b),this.sectionPositions[b]=b;this.setActiveSection(this.activeIndex),this._prepareLayout(),this._super(),this._repositionSections(!0),this.options.animate||(this.options.animateDuration=0),this.options.changeThreshold<0&&(this.options.changeThreshold=this.width/3),a>1?this.enable():this.disable()},_prepareLayout:function(){var a=this.sections.length,b=this.element.offsetWidth,c=this.element.offsetHeight,e="horizontal"===this.options.orientation?d.Orientation.HORIZONTAL:d.Orientation.VERTICAL,f=this.scroller.style;e===d.Orientation.HORIZONTAL?(f.width=b*a+"px",f.height=c+"px"):(f.width=b+"px",f.height=c*a+"px")},_initLayout:function(){var a,b,c,e,f=this.sections.style;for(a=0,b=this.sections.length;b>a;a++)f=this.sections[a].style,f.position="absolute",f.width=this.width+"px",f.height=this.height+"px",this.orientation===d.Orientation.HORIZONTAL?(c=0,e=this.width*a):(c=this.height*a,e=0),f.top=c+"px",f.left=e+"px";this._super()},_initScrollbar:function(){var a=this.options.scrollbar;a&&(this.scrollbar=new d.Scrollbar(this.element,{type:a,orientation:this.orientation,sections:this.sections}))},_initBouncingEffect:function(){var a=this.options;a.useBouncingEffect&&!a.circular&&(this.bouncingEffect=new d.Effect.Bouncing(this.element,{maxScrollX:this.maxScrollX,maxScrollY:this.maxScrollY,orientation:this.orientation}))},_translateScrollbar:function(a,b,c){var e,f,g;this.scrollbar&&(this.orientation===d.Orientation.HORIZONTAL?(f=this.sectionPositions[this.activeIndex]*this.width,e=this.activeIndex*this.width,g=e-f,e=-a+g):(f=this.sectionPositions[this.activeIndex]*this.height,e=this.activeIndex*this.height,g=e-f,e=-b+g),this.scrollbar.translate(e,c))},_translateScrollbarWithPageIndex:function(a,b){var c;this.scrollbar&&(c=this.orientation===d.Orientation.HORIZONTAL?a*this.width:a*this.height,this.scrollbar.translate(c,b))},_resetLayout:function(){var a,b,c=this.scroller.style,d=this.sections.style;for(c.width="",c.height="",a=0,b=this.sections.length;b>a;a++)d=this.sections[a].style,d.position="",d.width="",d.height="",d.top="",d.left="";this._super()},_bindEvents:function(){this._super(),this.scroller.addEventListener("webkitTransitionEnd",this)},_unbindEvents:function(){this._super(),this.scroller.removeEventListener("webkitTransitionEnd",this)},handleEvent:function(a){switch(this._super(a),a.type){case"webkitTransitionEnd":this._endScroll()}},setActiveSection:function(a,b){var c,e,f,g,h,i,j,k=this.options.activeClass;for(f=this.sections.length,g=this.sectionPositions[a],this.orientation===d.Orientation.HORIZONTAL?(i=0,h=-this.width*g):(i=-this.height*g,h=0),c=this.activeIndex-a>1?this.activeIndex+1:this.activeIndex-a<-1?this.activeIndex-1:a,this.activeIndex=a,j=0;f>j;j++)e=this.sections[j],e.classList.remove(k),j===this.activeIndex&&e.classList.add(k);h!==this.scrollerOffsetX||i!==this.scrollerOffsetY?(this._translate(h,i,b),this._translateScrollbarWithPageIndex(c,b)):this._endScroll()},getActiveSectionIndex:function(){return this.activeIndex},_end:function(){var a=Math.round(this.lastTouchPointX),b=Math.round(this.lastTouchPointY),c=this.lastTouchPointX-this.startTouchPointX,e=this.lastTouchPointY-this.startTouchPointY,f=this.orientation===d.Orientation.HORIZONTAL?c:e,g=Math.abs(a-this.startTouchPointX),h=Math.abs(b-this.startTouchPointY),i=this.orientation===d.Orientation.HORIZONTAL?g:h,j=this.orientation===d.Orientation.HORIZONTAL?this.maxScrollX:this.maxScrollY,k=this.orientation===d.Orientation.HORIZONTAL?this.scrollerOffsetX:this.scrollerOffsetY,l=(new Date).getTime(),m=l-this.startTime,n=300>m&&0>=k&&k>=j&&i>this.options.flickThreshold,o=this.initiated&&(this.moved||n),p=this.sections.length,q=this.options.changeThreshold,r=!n&&q>i,s=0;return this.touching=!1,this.bouncingEffect&&this.bouncingEffect.dragEnd(),o?(s=!r&&0>f?this.activeIndex+1:!r&&f>0?this.activeIndex-1:this.activeIndex,s=this.options.circular?(p+s)%p:0>s?0:s>p-1?p-1:s,this.setActiveSection(s,this.options.animateDuration),void 0):(this._endScroll(),void 0)},_endScroll:function(){this._repositionSections(),this._fireEvent(e.CHANGE,{active:this.activeIndex}),this._super()},_repositionSections:function(a){var c,e,f,g,h,i,j,k=this.sections.length,l=this.sectionPositions[this.activeIndex],m=b.parseInt(k/2,10),n=this.options.circular;if(this.orientation===d.Orientation.HORIZONTAL?(i=-(this.width*(n?m:this.activeIndex)),j=0):(i=0,j=-(this.height*(n?m:this.activeIndex))),this._translateScrollbarWithPageIndex(this.activeIndex),(a||0===l||l===k-1)&&(this._translate(i,j),n))for(c=0;k>c;c++)f=(k+this.activeIndex-m+c)%k,e=this.sections[f].style,this.sectionPositions[f]=c,this.orientation===d.Orientation.HORIZONTAL?(g=0,h=this.width*c):(g=this.height*c,h=0),e.top=g+"px",e.left=h+"px"},_clear:function(){this._super(),this.sectionPositions.length=0}}),a.SectionChanger=c}}(b,a)}(this);